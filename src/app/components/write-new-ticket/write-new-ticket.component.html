<div class="row">
  <div class="col s12 m6">
    <div class="card">
      <div class="input-field col s12">
        <input
          id="nameStore"
          type="text"
          class="form-control"
          [class.validate]="isValidForm.nameStore"
          [class.invalidate]="!isValidForm.nameStore"
          aria-required="true"
          [(ngModel)]="modelStoreName"
          (ngModelChange)="parseAddres()"
          [ngbTypeahead]="searchStore"
        />
        <label for="nameStore">Назва магазину</label>
        <span
          class="helper-text"
          *ngIf="!isValidForm.nameStore"
          data-error="wrong"
          data-success="right"
          >{{ messageValid }}</span
        >
      </div>
      <div class="input-field col s12">
        <input
          id="adressStore"
          type="text"
          class="form-control"
          [class.validate]="isValidForm.adressStore"
          [class.invalidate]="!isValidForm.adressStore"
          [(ngModel)]="modelAdressStore"
        />
        <label for="adressStore">Адреса магазину</label>
        <span
          class="helper-text"
          *ngIf="!isValidForm.adressStore"
          data-error="wrong"
          data-success="right"
          >{{ messageValid }}</span
        >
      </div>
      <div class="col s12 flex block-select-date">
        <a
          class="waves-effect light-blue darken-4 btn select-date"
          (click)="open(content)"
        >
          <i class="small material-icons">date_range</i>
          Вказати дату</a
        >
        <input
          id="selectDate"
          type="text"
          [value]="
            modelDate?.year
              ? modelDate?.day + '/' + modelDate?.month + '/' + modelDate?.year
              : (currentDate | date: 'dd/MM/yy')
          "
          class="validate input-date"
        />
      </div>
      <ng-template #content let-modal>
        <div class="modal-header">
          <h4 class="modal-title" id="modal-basic-title">
            Виберіть дату покупки
          </h4>
          <button
            type="button"
            class="btn-close"
            aria-label="Close"
            (click)="modal.dismiss('Cross click')"
          ></button>
        </div>
        <div class="wrapper">
          <ngb-datepicker
            #dp
            [(ngModel)]="modelDate"
            (navigate)="date = $event.next"
          />
        </div>
        <div class="modal-footer">
          <button
            type="button"
            class="btn btn-outline-secondary"
            (click)="modal.close('Save click')"
          >
            Зберегти
          </button>
        </div>
      </ng-template>
    </div>
  </div>
</div>
<div class="wrapper">
  <div class="row" *ngFor="let good of goods; index as index">
    <div class="col s12 m12">
      <div class="card">
        <div class="flex">
          <div class="input-field col s10 l3">
            <input
              id="{{ 'nameGood' + index }}"
              type="text"
              class="form-control validate"
              [(ngModel)]="good.name"
              (ngModelChange)="parseCategoryGood(good.name, index)"
              [ngbTypeahead]="searchGood"
            />
            <label for="{{ 'nameGood' + index }}">Назва товару</label>
          </div>
          <div class="input-field col s10 l3">
            <input
              id="{{ 'quantityGood' + index }}"
              type="number"
              class="form-control validate"
              [(ngModel)]="good.quantity"
            />
            <label for="{{ 'quantityGood' + index }}">Кількість</label>
          </div>
          <div class="input-field col s10 l3">
            <input
              id="{{ 'category' + index }}"
              type="text"
              class="form-control validate"
              [(ngModel)]="good.category"
              [ngbTypeahead]="searchCategory"
            />
            <label for="{{ 'category' + index }}">Категорія</label>
          </div>
          <div class="price-block col s12 l1">
            <div class="input-field col s6 l3">
              <input
                id="{{ 'price' + index }}"
                type="number"
                class="form-control validate"
                [(ngModel)]="good.price"
              />
              <label for="{{ 'price' + index }}">Ціна</label>
            </div>
            <span
              >({{
                good.price && good.quantity
                  ? +good.price / +good.quantity
                  : "0"
              }})</span
            >
          </div>
          <div class="flex btn-block col s12 l2">
            <a
              class="waves-effect light-blue darken-4 btn"
              (click)="refresh(index)"
            >
              <i class="small material-icons">loop</i></a
            >
            <a
              class="waves-effect light-blue darken-4 btn"
              (click)="delete(index)"
            >
              <i class="small material-icons">clear</i></a
            >
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col s12 flex">
    <a
      class="btn-floating btn-large waves-effect light-blue darken-4 btn"
      (click)="addNewGood()"
      ><i class="material-icons">add</i></a
    >
  </div>
  <div class="row t-a-block">
    <div class="col s12">
      <div class="card">
        <div class="totalAmound">
          <p>ЗАГАЛЬНА СУМА</p>
          <p>{{ getTotalAmound() }} грн</p>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="col s12 flex">
  <a
    class="btn-large waves-effect light-blue darken-4 btn"
    (click)="sentReceipt()"
    >Добавити чек</a>
  <a
    class="btn-large waves-effect light-blue darken-4 btn"
    (click)="validationForm()"
    >Test Valid</a>
</div>